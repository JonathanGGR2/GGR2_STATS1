<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistics Class - Practical 3: Data Visualization</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header Styles */
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 30px 0;
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.3em;
            opacity: 0.9;
        }
        
        /* Main Content Card */
        .main-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
            min-height: 500px;
        }
        
        /* Welcome Page */
        .welcome-section {
            padding: 50px;
            text-align: center;
        }
        
        .welcome-section h2 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        
        .welcome-message {
            color: #666;
            font-size: 1.2em;
            line-height: 1.8;
            margin-bottom: 40px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .prac-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%);
            border: 2px solid rgba(16, 185, 129, 0.2);
            border-radius: 15px;
            padding: 30px;
            margin: 20px auto;
            max-width: 600px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .prac-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(16, 185, 129, 0.2);
            border-color: #10b981;
        }
        
        .prac-card h3 {
            color: #059669;
            font-size: 1.8em;
            margin-bottom: 15px;
        }
        
        .prac-card p {
            color: #374151;
            font-size: 1.1em;
            line-height: 1.6;
        }
        
        /* Page Content Sections */
        .page-content {
            display: none;
            padding: 40px;
        }
        
        .page-content.active {
            display: block;
        }
        
        /* Back Button */
        .back-btn {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
        }
        
        /* Worksheet Download Section */
        .worksheet-section {
            text-align: center;
        }
        
        .worksheet-section h2 {
            color: #333;
            font-size: 2.2em;
            margin-bottom: 20px;
        }
        
        .worksheet-info {
            background: rgba(59, 130, 246, 0.05);
            border-left: 4px solid #3b82f6;
            padding: 25px;
            margin: 30px 0;
            border-radius: 0 10px 10px 0;
            text-align: left;
        }
        
        .worksheet-info h4 {
            color: #1e40af;
            margin-bottom: 10px;
        }
        
        .code-input-section {
            background: rgba(249, 250, 251, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
            text-align: left;
        }
        
        .form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        
        .download-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            width: 100%;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }
        
        /* Quiz Section */
        .quiz-section h2 {
            color: #333;
            font-size: 2.2em;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .quiz-intro {
            background: rgba(249, 115, 22, 0.05);
            border-left: 4px solid #f97316;
            padding: 25px;
            margin: 30px 0;
            border-radius: 0 10px 10px 0;
        }
        
        .quiz-intro h4 {
            color: #ea580c;
            margin-bottom: 10px;
        }
        
        .quiz-form {
            background: rgba(249, 250, 251, 0.8);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .question {
            margin-bottom: 25px;
        }
        
        .question h4 {
            margin-bottom: 10px;
            color: #374151;
        }
        
        .quiz-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            width: 100%;
        }
        
        .quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        /* Dr. Levin AI Section */
        .dr-levin-section {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            display: none;
        }
        
        .dr-levin-section.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .ai-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(16, 185, 129, 0.2);
        }
        
        .ai-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 15px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            animation: pulse 3s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }
            50% { box-shadow: 0 4px 12px rgba(16, 185, 129, 0.5), 0 0 20px rgba(16, 185, 129, 0.2); }
        }
        
        .ai-info h3 {
            color: #059669;
            margin: 0 0 5px 0;
            font-size: 1.4em;
        }
        
        .ai-info p {
            color: #6b7280;
            margin: 0;
            font-style: italic;
        }
        
        .struggle-form h4 {
            color: #374151;
            margin-bottom: 10px;
        }
        
        .struggle-form textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            min-height: 100px;
            transition: border-color 0.3s ease;
        }
        
        .struggle-form textarea:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        
        .ai-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            margin: 10px 5px;
        }
        
        .ai-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        .ai-btn.secondary {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
        }
        
        .ai-response {
            background: white;
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            display: none;
        }
        
        .ai-response.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        .response-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            color: #059669;
            font-weight: 600;
        }
        
        .ai-avatar-small {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .response-content {
            color: #374151;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .response-content h4 {
            color: #059669;
            margin-bottom: 15px;
        }
        
        .response-content h5 {
            color: #059669;
            margin: 15px 0 8px 0;
        }
        
        .response-content .example-box {
            background: rgba(59, 130, 246, 0.05);
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .response-content .formula {
            background: rgba(16, 185, 129, 0.05);
            border: 1px solid rgba(16, 185, 129, 0.2);
            padding: 10px;
            border-radius: 8px;
            font-family: monospace;
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            color: #6b7280;
            font-style: italic;
            padding: 20px;
        }
        
        .typing-dots {
            display: inline-block;
            margin-left: 10px;
        }
        
        .typing-dots span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            margin: 0 2px;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        /* Cheat Sheet Download */
        .cheatsheet-section {
            background: rgba(34, 197, 94, 0.05);
            border: 1px solid rgba(34, 197, 94, 0.2);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-top: 30px;
            display: none;
        }
        
        .cheatsheet-section.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        .cheatsheet-section h3 {
            color: #059669;
            margin-bottom: 15px;
        }
        
        /* Success/Error Messages */
        .message {
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            display: none;
            font-weight: 500;
        }
        
        .success {
            background: rgba(34, 197, 94, 0.1);
            color: #059669;
            border: 1px solid rgba(34, 197, 94, 0.2);
        }
        
        .error {
            background: rgba(239, 68, 68, 0.1);
            color: #dc2626;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }
        
        /* Chatbot Page Styles */
        .chatbot-section {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .chatbot-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 15px;
        }
        
        .chatbot-info {
            text-align: center;
        }
        
        .chatbot-info h2 {
            color: #059669;
            margin: 0 0 5px 0;
            font-size: 2em;
        }
        
        .chatbot-info p {
            color: #6b7280;
            margin: 0;
            font-style: italic;
            font-size: 1.1em;
        }
        
        .sample-questions-section {
            background: rgba(249, 250, 251, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }
        
        .sample-questions-section h3 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.3em;
        }
        
        .questions-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .questions-column {
            background: white;
            border-radius: 12px;
            padding: 25px;
            border: 1px solid rgba(102, 126, 234, 0.2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .questions-column h4 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1em;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(102, 126, 234, 0.1);
        }
        
        .questions-column .sample-q-btn {
            width: 100%;
            margin-bottom: 12px;
            padding: 12px 15px;
            text-align: left;
            font-size: 14px;
            line-height: 1.4;
            border-radius: 8px;
            background: rgba(249, 250, 251, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.15);
            transition: all 0.3s ease;
        }
        
        .questions-column .sample-q-btn:hover {
            background: rgba(102, 126, 234, 0.08);
            border-color: #667eea;
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.2);
        }
        
        .sample-questions-container {
            margin-bottom: 20px;
        }
        
        .sample-questions-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .sample-q-btn {
            background: white;
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            color: #374151;
            font-style: italic;
            text-align: left;
        }
        
        .sample-q-btn:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }
        
        .show-more-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 0 auto;
            display: block;
            transition: all 0.3s ease;
        }
        
        .show-more-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .chat-interface {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }
        
        .chat-input-section h3 {
            color: #059669;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .chat-input-section textarea {
            width: 100%;
            padding: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            min-height: 120px;
            transition: border-color 0.3s ease;
            line-height: 1.5;
        }
        
        .chat-input-section textarea:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        
        /* Help Section Styles */
        .help-section {
            padding: 0 20px;
        }
        
        .help-section h2 {
            color: #333;
            font-size: 2.2em;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .help-categories {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .help-category {
            background: rgba(249, 250, 251, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }
        
        .help-category h3 {
            color: #667eea;
            font-size: 1.4em;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .question-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .sample-question {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(102, 126, 234, 0.2);
            font-style: italic;
            color: #374151;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .sample-question:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
            border-color: #667eea;
        }
        
        .sample-question:before {
            content: "üí¨";
            margin-right: 8px;
        }
        
        .try-dr-levin {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
        }
        
        .try-dr-levin h3 {
            color: #059669;
            margin-bottom: 15px;
        }
        
        .try-dr-levin p {
            color: #374151;
            margin-bottom: 20px;
        }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .welcome-section, .page-content {
                padding: 25px;
            }
            
            .ai-header {
                flex-direction: column;
                text-align: center;
            }
            
            .ai-avatar {
                margin-right: 0;
                margin-bottom: 15px;
            }
            
            .question-grid {
                grid-template-columns: 1fr;
            }
            
            .sample-question {
                font-size: 0.9em;
            }
            
            .questions-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .questions-column .sample-q-btn:hover {
                transform: translateY(-2px);
                transform: translateX(0);
            }
            
            .chatbot-header {
                flex-direction: column;
                text-align: center;
            }
            
            .chatbot-header .ai-avatar {
                margin-right: 0;
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üìä BASIC STATISTICS</h1>
            <p><strong>Course: GGR2B10 / GGR02B2 - with Dr J Levin</strong></p>
            <p style="margin-top: 10px; font-size: 1.1em;">Practical 3: Data Visualisation & Graph Types</p>
        </div>
        
        <!-- Main Card -->
        <div class="main-card">
            <!-- Welcome Page -->
            <div id="welcomePage" class="welcome-section">
                <h2>Welcome to Practical 3! üìà</h2>
                <div class="welcome-message">
                    <p>Today we'll be exploring different types of data visualisation techniques and how to select the right graph type for your data. Learn how to create effective scatter plots, line graphs, box plots, and more!</p>
                    <br>
                    <p><strong>Choose your learning path below:</strong> work with me in class, test your knowledge, or get instant help from Dr. Levin!</p>
                </div>
                
                <!-- Option 1: In-Class Worksheet -->
                <div class="prac-card" onclick="showWorksheet()">
                    <h3>üìù Option 1: In-Class Worksheet and Prac 3 Manual</h3>
                    <p>Download the worksheet file using your unique code. We'll work through the problems together during class time, exploring statistical functions and data analysis techniques step by step.</p>
                </div>
                
                <!-- Option 2: Quiz & Cheat Sheet -->
                <div class="prac-card" onclick="showQuiz()">
                    <h3>üß† Option 2: Quiz & Cheat Sheet</h3>
                    <p>Test your knowledge with our interactive quiz about data visualization and statistical graphs. Successfully complete the quiz to unlock and download your personalized cheat sheet!</p>
                </div>
                
                <!-- Option 3: Dr. Levin Chatbot -->
                <div class="prac-card" onclick="showChatbot()">
                    <h3>üí¨ Option 3: Dr. Levin Chatbot</h3>
                    <p>Get instant help from Dr. Levin, your personal statistics chatbot technical tutor. Ask questions about graphs, Excel, correlation, or any data visualisation topic - no quiz required!</p>
                </div>
            </div>
            
            <!-- Dr. Levin Chatbot Page -->
            <div id="chatbotPage" class="page-content">
                <button class="back-btn" onclick="goHome()">
                    ‚Üê Back to Options
                </button>
                
                <div class="chatbot-section">
                    <div class="chatbot-header">
                        <div class="ai-avatar">üë®‚Äçüè´</div>
                        <div class="chatbot-info">
                            <h2>Dr. Levin - Statistics Chatbot</h2>
                            <p>Your Personal Technical Tutor for Data Visualisation</p>
                        </div>
                    </div>
                    
                    <!-- Sample Questions Section -->
                    <div class="sample-questions-section">
                        <h3>üí° Click any question below to see Dr. Levin's response:</h3>
                        
                        <!-- First 20 Questions (Always Visible) -->
                        <div class="questions-grid" id="mainQuestions">
                            <div class="questions-column">
                                <h4>üìä Graph Types & Excel Help</h4>
                                <button class="sample-q-btn" onclick="askSampleQuestion('Which graph should I use for my data?')">
                                    Which graph should I use for my data?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('When do I use a scatter plot vs line graph?')">
                                    When do I use a scatter plot vs line graph?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What is the difference between bar charts and histograms?')">
                                    What's the difference between bar charts and histograms?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('When should I use a pie chart?')">
                                    When should I use a pie chart?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What are box plots used for?')">
                                    What are box plots used for?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('When should I use a histogram?')">
                                    When should I use a histogram?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('When do I use a line graph?')">
                                    When do I use a line graph?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What is the difference between column and bar charts?')">
                                    What's the difference between column and bar charts?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('Should I use 3D charts in Excel?')">
                                    Should I use 3D charts in Excel?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I choose between different chart types?')">
                                    How do I choose between different chart types?
                                </button>
                            </div>
                            
                            <div class="questions-column">
                                <h4>üìà Correlation & Data Analysis</h4>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What does correlation coefficient r mean?')">
                                    What does correlation coefficient r mean?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I interpret R-squared values?')">
                                    How do I interpret R-squared values?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What is the difference between r and R squared?')">
                                    What's the difference between r and R¬≤?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What does a correlation of 0.7 mean?')">
                                    What does a correlation of 0.7 mean?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('Can correlation be negative?')">
                                    Can correlation be negative?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I calculate correlation in Excel?')">
                                    How do I calculate correlation in Excel?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What does correlation does not imply causation mean?')">
                                    What does "correlation ‚â† causation" mean?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What makes a correlation meaningful?')">
                                    What makes a correlation meaningful?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I interpret a scatter plot?')">
                                    How do I interpret a scatter plot?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What do outliers mean in my data?')">
                                    What do outliers mean in my data?
                                </button>
                            </div>
                        </div>
                        
                        <!-- Additional 20 Questions (Show More) -->
                        <div class="questions-grid" id="additionalQuestions" style="display: none;">
                            <div class="questions-column">
                                <h4>üîß Excel Technical Support</h4>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I add a trendline in Excel?')">
                                    How do I add a trendline in Excel?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I format my chart axes?')">
                                    How do I format my chart axes?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I remove gridlines from my chart?')">
                                    How do I remove gridlines from my chart?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I change colors in my Excel chart?')">
                                    How do I change colors in my Excel chart?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I add error bars to my chart?')">
                                    How do I add error bars to my chart?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I create a scatter plot in Excel?')">
                                    How do I create a scatter plot in Excel?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I add axis labels in Excel?')">
                                    How do I add axis labels in Excel?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I resize my chart in Excel?')">
                                    How do I resize my chart in Excel?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I read a box plot?')">
                                    How do I read a box plot?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What does skewed data look like?')">
                                    What does skewed data look like?
                                </button>
                            </div>
                            
                            <div class="questions-column">
                                <h4>üé® Professional Chart Design</h4>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I identify trends in my data?')">
                                    How do I identify trends in my data?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What is normal distribution in graphs?')">
                                    What's normal distribution in graphs?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What makes a good academic graph?')">
                                    What makes a good academic graph?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('Should I include a title on my chart?')">
                                    Should I include a title on my chart?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('What colors should I use in academic charts?')">
                                    What colors should I use in academic charts?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I make my chart look professional?')">
                                    How do I make my chart look professional?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('Should I start my axis at zero?')">
                                    Should I start my axis at zero?
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('My data does not look right in the graph')">
                                    My data doesn't look right in the graph
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('I do not understand what my graph is telling me')">
                                    I don't understand what my graph is telling me
                                </button>
                                <button class="sample-q-btn" onclick="askSampleQuestion('How do I know if my visualization is effective?')">
                                    How do I know if my visualization is effective?
                                </button>
                            </div>
                        </div>
                        
                        <button class="show-more-btn" onclick="toggleAllQuestions()" id="showAllBtn">
                            Show All 40 Questions (20 More) ‚Üì
                        </button>
                    </div>
                    
                    <!-- Chat Interface -->
                    <div class="chat-interface">
                        <div class="chat-input-section">
                            <h3>üí¨ Ask Dr. Levin Anything About Statistics & Data Visualisation</h3>
                            <div class="form-group">
                                <textarea id="chatQuestion" placeholder="Type your question here... 

Examples:
‚Ä¢ How do I know which graph type to use?
‚Ä¢ What does my correlation coefficient mean?
‚Ä¢ How do I make my chart look professional?
‚Ä¢ How do I create a scatter plot in Excel?" rows="4"></textarea>
                            </div>
                            
                            <button class="ai-btn" onclick="askDrLevinDirect()">ü§ñ Ask Dr. Levin</button>
                        </div>
                        
                        <div id="chatResponse" class="ai-response">
                            <!-- AI response will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Worksheet Download Page -->
            <div id="worksheetPage" class="page-content">
                <button class="back-btn" onclick="goHome()">
                    ‚Üê Back to Options
                </button>
                
                <div class="worksheet-section">
                    <h2>üìù In-Class Worksheet and Prac 3 Manual</h2>
                    
                    <!-- In-Class Worksheet Section -->
                    <div class="worksheet-info">
                        <h4>üìã In-Class Worksheet - What you'll get:</h4>
                        <p>‚Ä¢ In-class data that will allow you to practice alongside Dr. Levin<br>
                        ‚Ä¢ Examples to create various graph types including:<br>
                        ‚Ä¢ Scatter plots with trend lines and correlation<br>
                        ‚Ä¢ Line graphs with multiple series<br>
                        ‚Ä¢ Bar graphs with error bars<br>
                        ‚Ä¢ Box plots for distribution comparison<br>
                        ‚Ä¢ Step-by-step visualization exercises</p>
                    </div>
                    
                    <div class="code-input-section">
                        <div class="form-group">
                            <label for="worksheetCode">Enter your worksheet code:</label>
                            <input type="text" id="worksheetCode" placeholder="e.g., GGR2" autocomplete="off">
                        </div>
                        
                        <button class="download-btn" onclick="downloadWorksheet()">
                            üì• Download Worksheet
                        </button>
                        
                        <div id="worksheetMessage" class="message"></div>
                    </div>
                    
                    <!-- Practical 3 Exercise Section -->
                    <div class="worksheet-info" style="margin-top: 40px; background: rgba(249, 115, 22, 0.05); border-left: 4px solid #f97316;">
                        <h4 style="color: #ea580c;">üìä Practical 3 In-Class Exercise - What you'll get:</h4>
                        <p>‚Ä¢ A worksheet that is due by next Thursday (7th August)<br>
                        ‚Ä¢ Requires thought about graphical figures in Excel<br>
                        ‚Ä¢ Requires answers in the Excel sheet you create<br>
                        ‚Ä¢ Read all the instructions within the sheet</p>
                    </div>
                    
                    <div class="code-input-section">
                        <div class="form-group">
                            <label for="exerciseCode">Enter your worksheet code:</label>
                            <input type="text" id="exerciseCode" placeholder="Enter code for Prac 3 Exercise" autocomplete="off">
                        </div>
                        
                        <button class="download-btn" onclick="downloadExercise()" style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);">
                            üì• Download Prac 3 Class Exercise
                        </button>
                        
                        <div id="exerciseMessage" class="message"></div>
                    </div>
                </div>
            </div>
            
            <!-- Quiz Page -->
            <div id="quizPage" class="page-content">
                <button class="back-btn" onclick="goHome()">
                    ‚Üê Back to Options
                </button>
                
                <div class="quiz-section">
                    <h2>üß† Data Visualization Quiz</h2>
                    
                    <div class="quiz-intro">
                        <h4>üìù Quiz Instructions:</h4>
                        <p>Answer the three questions below about data visualization and statistical graphs. After completing the quiz, you'll have the opportunity to ask Dr. Levin about any concepts you're struggling with, followed by access to download your personalized cheat sheet.</p>
                    </div>
                    
                    <div class="quiz-form">
                        <div class="form-group">
                            <label for="studentNumber">Student Number:</label>
                            <input type="text" id="studentNumber" placeholder="e.g., 2024001234" required>
                        </div>
                        
                        <div class="question">
                            <h4>1. Write the symbol used for Pearson correlation coefficient:</h4>
                            <input type="text" id="q1" placeholder="Enter the symbol">
                        </div>
                        
                        <div class="question">
                            <h4>2. If R¬≤ = 0.87, what is the value of r including direction (positive or negative)?</h4>
                            <input type="text" id="q2" placeholder="Enter your answer (e.g., +0.93)">
                        </div>
                        
                        <div class="question">
                            <h4>3. Which graph type is most appropriate for comparing distributions across groups?</h4>
                            <input type="text" id="q3" placeholder="Enter graph type">
                        </div>
                        
                        <button class="quiz-btn" onclick="submitQuiz()">Submit Quiz & Get Cheat Sheet</button>
                        
                        <div id="quizMessage" class="message"></div>
                    </div>
                </div>
                
                <!-- Cheat Sheet Download Section -->
                <div id="cheatsheetSection" class="cheatsheet-section">
                    <h3>üéâ Congratulations! Quiz Complete</h3>
                    <p>You've successfully completed the quiz! Download your personalised visualisation cheat sheet below:</p>
                    <br>
                    <button class="download-btn" onclick="downloadCheatSheet()">üìÑ Download Your Cheat Sheet</button>
                    <br><br>
                    <p style="color: #666; font-size: 0.9em;">Need help with statistics concepts? Check out <strong>Option 3: Dr. Levin Chatbot</strong> from the main menu!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // File database for worksheet downloads
        const worksheetDatabase = {
            'GGR2_PRAC3': {
                name: 'Prac_workalong.xlsx',
                url: 'https://github.com/JonathanGGR2/GGR2_STATS1/raw/main/Prac_workalong.xlsx'
            },
            'PRAC3_DOWNLOAD': {
                name: 'Prac 3 - student exercise.pdf',
                url: 'https://github.com/JonathanGGR2/GGR2_STATS1/raw/main/Prac%203%20-%20student%20exercise.pdf'
            }
        };
        
        // Quiz correct answers
        const correctAnswers = ['r', '+0.93', 'box plot'];
        
        // ENHANCED Dr. Levin responses - 40 comprehensive responses!
        const drLevinResponses = {
            // Graph Types & Selection (10 responses)
            'which graph': {
                title: "Choosing the Right Graph for Your Data",
                content: `
                    <h5>üìä Quick Graph Selection Guide</h5>
                    <p>The key is matching your graph type to your data type and purpose:</p>
                    
                    <div class="example-box">
                        <strong>Data Relationships:</strong><br>
                        ‚Ä¢ <strong>Two continuous variables:</strong> Scatter plot<br>
                        ‚Ä¢ <strong>Change over time:</strong> Line graph<br>
                        ‚Ä¢ <strong>Compare categories:</strong> Bar chart<br>
                        ‚Ä¢ <strong>Show distribution:</strong> Histogram or box plot<br>
                        ‚Ä¢ <strong>Show proportions:</strong> Pie chart (use sparingly!)
                    </div>
                    
                    <h5>üéØ Decision Tree:</h5>
                    <p>1. What are you trying to show? (relationship, trend, comparison, distribution)<br>
                    2. What type of data do you have? (categorical, continuous, time-series)<br>
                    3. How many variables? (one, two, multiple)</p>
                    
                    <p>Remember: clarity and accuracy are more important than fancy effects!</p>
                `
            },
            'scatter vs line': {
                title: "Scatter Plot vs Line Graph: When to Use Each",
                content: `
                    <h5>üìà Key Differences</h5>
                    <p>Both show relationships, but they serve different purposes:</p>
                    
                    <div class="example-box">
                        <strong>Use Scatter Plots when:</strong><br>
                        ‚Ä¢ Exploring relationships between two continuous variables<br>
                        ‚Ä¢ Data points are independent (not time-ordered)<br>
                        ‚Ä¢ You want to see correlation patterns<br>
                        ‚Ä¢ Example: Height vs Weight, Temperature vs Humidity
                    </div>
                    
                    <div class="example-box">
                        <strong>Use Line Graphs when:</strong><br>
                        ‚Ä¢ Showing change over time<br>
                        ‚Ä¢ Data points are connected/sequential<br>
                        ‚Ä¢ Emphasizing trends and patterns<br>
                        ‚Ä¢ Example: Stock prices over months, population growth
                    </div>
                    
                    <p>Pro tip: If your X-axis is time, use a line graph. If it's another measurement, consider a scatter plot!</p>
                `
            },
            'bar vs histogram': {
                title: "Bar Charts vs Histograms: Understanding the Difference",
                content: `
                    <h5>üìä Two Different Tools</h5>
                    <p>These look similar but serve completely different purposes:</p>
                    
                    <div class="example-box">
                        <strong>Bar Charts:</strong><br>
                        ‚Ä¢ Compare different categories<br>
                        ‚Ä¢ Categories are distinct and separate<br>
                        ‚Ä¢ Gaps between bars are intentional<br>
                        ‚Ä¢ Example: Sales by product, grades by student
                    </div>
                    
                    <div class="example-box">
                        <strong>Histograms:</strong><br>
                        ‚Ä¢ Show distribution of continuous data<br>
                        ‚Ä¢ Bars represent ranges (bins) of values<br>
                        ‚Ä¢ No gaps between bars<br>
                        ‚Ä¢ Example: Distribution of test scores, ages in population
                    </div>
                    
                    <p>Quick test: Can you rearrange the categories? If yes ‚Üí bar chart. If no ‚Üí histogram.</p>
                `
            },
            'pie chart': {
                title: "When to Use Pie Charts (And When Not To)",
                content: `
                    <h5>ü•ß Pie Chart Guidelines</h5>
                    <p>Pie charts are often overused. Here's when they work best:</p>
                    
                    <div class="example-box">
                        <strong>Use pie charts when:</strong><br>
                        ‚Ä¢ Showing parts of a whole (percentages that add to 100%)<br>
                        ‚Ä¢ You have 5 or fewer categories<br>
                        ‚Ä¢ One segment is clearly larger than others<br>
                        ‚Ä¢ Exact values are less important than proportions
                    </div>
                    
                    <div class="example-box">
                        <strong>Avoid pie charts when:</strong><br>
                        ‚Ä¢ You have more than 5-6 categories<br>
                        ‚Ä¢ Values are similar in size<br>
                        ‚Ä¢ You need to show trends over time<br>
                        ‚Ä¢ Precision is important
                    </div>
                    
                    <p>Alternative: Bar charts are almost always clearer and easier to read than pie charts!</p>
                `
            },
            'box plot use': {
                title: "Box Plots: Perfect for Comparing Groups",
                content: `
                    <h5>üì¶ Why Box Plots Are Powerful</h5>
                    <p>Box plots show five key statistics at once and are excellent for comparisons:</p>
                    
                    <div class="example-box">
                        <strong>What Box Plots Show:</strong><br>
                        ‚Ä¢ Median (middle line) - the central tendency<br>
                        ‚Ä¢ Q1 and Q3 (box edges) - middle 50% of data<br>
                        ‚Ä¢ Min and Max (whisker ends) - data range<br>
                        ‚Ä¢ Outliers (dots beyond whiskers) - unusual values
                    </div>
                    
                    <h5>üéØ Perfect for:</h5>
                    <p>‚Ä¢ Comparing distributions between groups<br>
                    ‚Ä¢ Identifying outliers<br>
                    ‚Ä¢ Seeing data spread and skewness<br>
                    ‚Ä¢ When you have multiple groups to compare</p>
                    
                    <p>In Excel: Insert ‚Üí Charts ‚Üí Statistical ‚Üí Box & Whisker</p>
                `
            },
            'histogram use': {
                title: "Histograms: Understanding Data Distribution",
                content: `
                    <h5>üìä What Histograms Reveal</h5>
                    <p>Histograms show the shape and spread of your data distribution:</p>
                    
                    <div class="example-box">
                        <strong>Key Features to Look For:</strong><br>
                        ‚Ä¢ <strong>Shape:</strong> Normal (bell), skewed, bimodal<br>
                        ‚Ä¢ <strong>Center:</strong> Where most values cluster<br>
                        ‚Ä¢ <strong>Spread:</strong> How wide the distribution is<br>
                        ‚Ä¢ <strong>Outliers:</strong> Unusual values far from center
                    </div>
                    
                    <h5>üîß Excel Tips:</h5>
                    <p>‚Ä¢ Data Analysis ‚Üí Histogram (if enabled)<br>
                    ‚Ä¢ Or Insert ‚Üí Charts ‚Üí Statistical ‚Üí Histogram<br>
                    ‚Ä¢ Adjust bin size to reveal patterns clearly<br>
                    ‚Ä¢ Remove gaps between bars</p>
                    
                    <p>Common mistake: Don't confuse with bar charts - histograms show continuous data ranges!</p>
                `
            },
            'line graph': {
                title: "Line Graphs: Showing Change Over Time",
                content: `
                    <h5>üìà When Line Graphs Excel</h5>
                    <p>Line graphs are perfect for time-series data and showing trends:</p>
                    
                    <div class="example-box">
                        <strong>Best Uses:</strong><br>
                        ‚Ä¢ Temperature changes over months<br>
                        ‚Ä¢ Stock prices over time<br>
                        ‚Ä¢ Population growth over years<br>
                        ‚Ä¢ Any data where order matters
                    </div>
                    
                    <h5>üìè Best Practices:</h5>
                    <p>‚Ä¢ Always put time on the X-axis<br>
                    ‚Ä¢ Start Y-axis at appropriate value (often zero)<br>
                    ‚Ä¢ Use markers sparingly - only if few data points<br>
                    ‚Ä¢ Multiple lines? Use different colors/patterns<br>
                    ‚Ä¢ Remove gridlines for cleaner look</p>
                    
                    <p>Excel tip: Select data ‚Üí Insert ‚Üí Line Chart ‚Üí choose style without markers for smooth trends.</p>
                `
            },
            'column vs bar': {
                title: "Column Charts vs Bar Charts: Layout Matters",
                content: `
                    <h5>üìä Same Data, Different Orientation</h5>
                    <p>Both compare categories, but layout affects readability:</p>
                    
                    <div class="example-box">
                        <strong>Column Charts (Vertical Bars):</strong><br>
                        ‚Ä¢ Best for short category names<br>
                        ‚Ä¢ Time-based categories (months, years)<br>
                        ‚Ä¢ When you have space above/below<br>
                        ‚Ä¢ Traditional and familiar to readers
                    </div>
                    
                    <div class="example-box">
                        <strong>Bar Charts (Horizontal Bars):</strong><br>
                        ‚Ä¢ Better for long category names<br>
                        ‚Ä¢ Many categories (easier to read labels)<br>
                        ‚Ä¢ When you want to emphasize values<br>
                        ‚Ä¢ More space for category labels
                    </div>
                    
                    <p>Rule of thumb: If category names are longer than 5-6 characters, consider horizontal bars!</p>
                `
            },
            '3d charts': {
                title: "3D Charts: Why You Should Avoid Them",
                content: `
                    <h5>üö´ The 3D Problem</h5>
                    <p>3D charts might look fancy, but they create more problems than they solve:</p>
                    
                    <div class="example-box">
                        <strong>Problems with 3D Charts:</strong><br>
                        ‚Ä¢ Harder to read exact values<br>
                        ‚Ä¢ Perspective distorts data perception<br>
                        ‚Ä¢ Elements can hide behind others<br>
                        ‚Ä¢ Looks unprofessional in academic work<br>
                        ‚Ä¢ No real benefit over 2D versions
                    </div>
                    
                    <h5>‚úÖ Better Alternatives:</h5>
                    <p>‚Ä¢ Use clean, flat 2D charts<br>
                    ‚Ä¢ Focus on clear labeling and colors<br>
                    ‚Ä¢ Let the data tell the story, not fancy effects<br>
                    ‚Ä¢ Save 3D for actual 3-dimensional data only</p>
                    
                    <p>Remember: Academic work values clarity and accuracy over visual effects!</p>
                `
            },
            'chart selection': {
                title: "Complete Chart Selection Decision Tree",
                content: `
                    <h5>üå≥ Your Chart Selection Guide</h5>
                    <p>Follow this decision tree to pick the perfect chart:</p>
                    
                    <div class="example-box">
                        <strong>Step 1 - What's your goal?</strong><br>
                        ‚Ä¢ Show relationship ‚Üí Scatter plot<br>
                        ‚Ä¢ Show trend ‚Üí Line graph<br>
                        ‚Ä¢ Compare values ‚Üí Bar chart<br>
                        ‚Ä¢ Show distribution ‚Üí Histogram/Box plot<br>
                        ‚Ä¢ Show composition ‚Üí Stacked bar/Pie chart
                    </div>
                    
                    <div class="example-box">
                        <strong>Step 2 - What's your data?</strong><br>
                        ‚Ä¢ Time series ‚Üí Line graph<br>
                        ‚Ä¢ Categories ‚Üí Bar chart<br>
                        ‚Ä¢ Continuous ‚Üí Scatter/Histogram<br>
                        ‚Ä¢ Groups to compare ‚Üí Box plot
                    </div>
                    
                    <p>When in doubt, start with a simple bar chart or scatter plot - they work for most situations!</p>
                `
            },

            // Correlation & Data Analysis (10 responses)  
            'correlation coefficient': {
                title: "Understanding Correlation Coefficient (r)",
                content: `
                    <h5>üìà What r Tells You</h5>
                    <p>The correlation coefficient (r) measures how closely two variables move together:</p>
                    
                    <div class="example-box">
                        <strong>Key Properties:</strong><br>
                        ‚Ä¢ <strong>Range:</strong> -1 to +1<br>
                        ‚Ä¢ <strong>Direction:</strong> + means positive, - means negative<br>
                        ‚Ä¢ <strong>Strength:</strong> Closer to ¬±1 = stronger relationship<br>
                        ‚Ä¢ <strong>Zero:</strong> No linear relationship
                    </div>
                    
                    <h5>üî¢ Interpretation Guide:</h5>
                    <div class="formula">
                        ¬±0.90 to ¬±1.00: Very strong<br>
                        ¬±0.70 to ¬±0.89: Strong<br>
                        ¬±0.50 to ¬±0.69: Moderate<br>
                        ¬±0.30 to ¬±0.49: Weak<br>
                        ¬±0.00 to ¬±0.29: Very weak
                    </div>
                    
                    <p>Excel function: =CORREL(array1, array2). Always report with sign (+ or -)!</p>
                `
            },
            'r squared': {
                title: "R-Squared (R¬≤): Explained Variation",
                content: `
                    <h5>üìä What R¬≤ Means</h5>
                    <p>R¬≤ tells you what percentage of variation in Y is explained by X:</p>
                    
                    <div class="example-box">
                        <strong>Understanding R¬≤:</strong><br>
                        ‚Ä¢ R¬≤ = r √ó r (correlation squared)<br>
                        ‚Ä¢ Always positive (0 to 1)<br>
                        ‚Ä¢ Expressed as percentage<br>
                        ‚Ä¢ Higher = better predictive power
                    </div>
                    
                    <h5>üí° Real Example:</h5>
                    <p>If R¬≤ = 0.64 between study hours and test scores:<br>
                    "64% of the variation in test scores is explained by study hours, 36% is due to other factors."</p>
                    
                    <h5>üéØ Practical Guidelines:</h5>
                    <p>‚Ä¢ R¬≤ > 0.7: Strong relationship<br>
                    ‚Ä¢ R¬≤ = 0.5: Moderate relationship<br>
                    ‚Ä¢ R¬≤ < 0.3: Weak relationship</p>
                `
            },
            'r vs r squared': {
                title: "r vs R¬≤: When to Use Which",
                content: `
                    <h5>ü§î The Key Differences</h5>
                    <p>Both measure relationship strength, but they tell different stories:</p>
                    
                    <div class="example-box">
                        <strong>Use r (correlation) when:</strong><br>
                        ‚Ä¢ You want to know direction (positive/negative)<br>
                        ‚Ä¢ Describing the relationship strength<br>
                        ‚Ä¢ Comparing different correlations<br>
                        ‚Ä¢ r = -0.8 means strong negative relationship
                    </div>
                    
                    <div class="example-box">
                        <strong>Use R¬≤ when:</strong><br>
                        ‚Ä¢ You want to know explained variation<br>
                        ‚Ä¢ Evaluating predictive models<br>
                        ‚Ä¢ Talking about "fit" of your model<br>
                        ‚Ä¢ R¬≤ = 0.64 means 64% of variation explained
                    </div>
                    
                    <h5>üîó The Connection:</h5>
                    <p>If r = 0.8, then R¬≤ = 0.64<br>If r = -0.8, then R¬≤ = 0.64 (same R¬≤!)</p>
                `
            },
            'correlation strength': {
                title: "What Does a Correlation of 0.7 Mean?",
                content: `
                    <h5>üí™ Understanding Correlation Strength</h5>
                    <p>A correlation of 0.7 indicates a strong positive relationship:</p>
                    
                    <div class="example-box">
                        <strong>r = 0.7 means:</strong><br>
                        ‚Ä¢ Strong positive relationship<br>
                        ‚Ä¢ As one variable increases, the other tends to increase<br>
                        ‚Ä¢ R¬≤ = 0.49, so 49% of variation is explained<br>
                        ‚Ä¢ Points on scatter plot cluster fairly tightly around a line
                    </div>
                    
                    <h5>üéØ Practical Interpretation:</h5>
                    <p>‚Ä¢ In most fields, r = 0.7 is considered strong<br>
                    ‚Ä¢ The relationship is clearly visible but not perfect<br>
                    ‚Ä¢ There's still 51% unexplained variation<br>
                    ‚Ä¢ Good enough for making predictions with some confidence</p>
                    
                    <h5>üìä Visual Clues:</h5>
                    <p>On a scatter plot, you'd see points forming a clear upward trend with some scatter around the line.</p>
                `
            },
            'negative correlation': {
                title: "Understanding Negative Correlations",
                content: `
                    <h5>‚ÜòÔ∏è When Variables Move in Opposite Directions</h5>
                    <p>Negative correlations are just as meaningful as positive ones:</p>
                    
                    <div class="example-box">
                        <strong>Examples of Negative Correlations:</strong><br>
                        ‚Ä¢ Temperature vs heating costs<br>
                        ‚Ä¢ Exercise vs resting heart rate<br>
                        ‚Ä¢ Study time vs number of errors<br>
                        ‚Ä¢ Price vs demand (usually)
                    </div>
                    
                    <h5>üìà What the Numbers Mean:</h5>
                    <p>‚Ä¢ r = -0.8 is just as strong as r = +0.8<br>
                    ‚Ä¢ Both show strong relationships<br>
                    ‚Ä¢ Only the direction differs<br>
                    ‚Ä¢ R¬≤ is the same for both: 0.64</p>
                    
                    <h5>üí° Interpretation Tip:</h5>
                    <p>Say "As X increases, Y decreases" rather than "negative relationship" - it's clearer!</p>
                `
            },
            'correlation excel': {
                title: "Calculating Correlation in Excel",
                content: `
                    <h5>üîß Excel Methods for Correlation</h5>
                    <p>Multiple ways to calculate correlation in Excel:</p>
                    
                    <div class="example-box">
                        <strong>Method 1: CORREL Function</strong><br>
                        ‚Ä¢ =CORREL(array1, array2)<br>
                        ‚Ä¢ Simple and direct<br>
                        ‚Ä¢ Example: =CORREL(A2:A20, B2:B20)
                    </div>
                    
                    <div class="example-box">
                        <strong>Method 2: Data Analysis Toolpak</strong><br>
                        ‚Ä¢ Data ‚Üí Data Analysis ‚Üí Correlation<br>
                        ‚Ä¢ Can do multiple correlations at once<br>
                        ‚Ä¢ Creates correlation matrix
                    </div>
                    
                    <div class="example-box">
                        <strong>Method 3: From Scatter Plot</strong><br>
                        ‚Ä¢ Add trendline to scatter plot<br>
                        ‚Ä¢ Display R¬≤ value<br>
                        ‚Ä¢ Calculate r = ¬±‚àöR¬≤
                    </div>
                `
            },
            'correlation causation': {
                title: "Correlation vs Causation: A Critical Distinction",
                content: `
                    <h5>‚ö†Ô∏è The Most Important Rule in Statistics</h5>
                    <p>"Correlation does not imply causation" - here's why this matters:</p>
                    
                    <div class="example-box">
                        <strong>Classic Examples:</strong><br>
                        ‚Ä¢ Ice cream sales vs drowning deaths (both caused by summer)<br>
                        ‚Ä¢ Shoe size vs reading ability in children (both caused by age)<br>
                        ‚Ä¢ Number of firefighters vs damage (more damage needs more firefighters)
                    </div>
                    
                    <h5>ü§î Three Possible Explanations for Correlation:</h5>
                    <p>1. <strong>A causes B:</strong> Exercise causes weight loss<br>
                    2. <strong>B causes A:</strong> Weight loss motivates more exercise<br>
                    3. <strong>C causes both A and B:</strong> Motivation causes both</p>
                    
                    <p>Always ask: "What else could explain this relationship?"</p>
                `
            },
            'meaningful correlation': {
                title: "What Makes a Correlation Meaningful?",
                content: `
                    <h5>üéØ Beyond Just the Numbers</h5>
                    <p>A strong correlation isn't just about the r value - context matters:</p>
                    
                    <div class="example-box">
                        <strong>Consider These Factors:</strong><br>
                        ‚Ä¢ <strong>Sample size:</strong> Larger samples more reliable<br>
                        ‚Ä¢ <strong>Data quality:</strong> Measurement errors weaken correlation<br>
                        ‚Ä¢ <strong>Outliers:</strong> Can artificially inflate or deflate r<br>
                        ‚Ä¢ <strong>Range restriction:</strong> Limited ranges reduce correlation
                    </div>
                    
                    <h5>üìä Practical Significance:</h5>
                    <p>‚Ä¢ r = 0.3 might be huge in social science<br>
                    ‚Ä¢ r = 0.9 might be expected in physics<br>
                    ‚Ä¢ Consider real-world impact, not just statistics<br>
                    ‚Ä¢ Always visualize with scatter plots</p>
                    
                    <p>Remember: Statistical significance ‚â† practical importance!</p>
                `
            },
            'interpret scatter': {
                title: "Reading and Interpreting Scatter Plots",
                content: `
                    <h5>üëÄ What to Look for in Scatter Plots</h5>
                    <p>Scatter plots reveal patterns that numbers alone can't show:</p>
                    
                    <div class="example-box">
                        <strong>Key Patterns:</strong><br>
                        ‚Ä¢ <strong>Direction:</strong> Upward slope = positive, downward = negative<br>
                        ‚Ä¢ <strong>Strength:</strong> Tight cluster = strong, spread out = weak<br>
                        ‚Ä¢ <strong>Shape:</strong> Linear, curved, or no pattern<br>
                        ‚Ä¢ <strong>Outliers:</strong> Points far from the main pattern
                    </div>
                    
                    <h5>üîç Interpretation Steps:</h5>
                    <p>1. Describe the overall pattern<br>
                    2. Note the direction and strength<br>
                    3. Identify any outliers<br>
                    4. Consider what causes the relationship<br>
                    5. Note any non-linear patterns</p>
                    
                    <p>Remember: Always look at the plot before trusting correlation numbers!</p>
                `
            },
            'outliers': {
                title: "Understanding Outliers in Your Data",
                content: `
                    <h5>üéØ Spotting Unusual Data Points</h5>
                    <p>Outliers are data points that don't fit the general pattern:</p>
                    
                    <div class="example-box">
                        <strong>How to Identify Outliers:</strong><br>
                        ‚Ä¢ Points far from trendline in scatter plots<br>
                        ‚Ä¢ Values beyond whiskers in box plots<br>
                        ‚Ä¢ IQR method: Beyond Q1-1.5√óIQR or Q3+1.5√óIQR<br>
                        ‚Ä¢ Z-score method: |z| > 2 or 3
                    </div>
                    
                    <h5>ü§î What to Do with Outliers:</h5>
                    <p>‚Ä¢ <strong>Investigate first:</strong> Data error or real phenomenon?<br>
                    ‚Ä¢ <strong>Report them:</strong> Don't just delete without reason<br>
                    ‚Ä¢ <strong>Analyze with and without:</strong> How do they affect results?<br>
                    ‚Ä¢ <strong>Consider context:</strong> Are they meaningful?</p>
                    
                    <p>Never automatically remove outliers - they often tell interesting stories!</p>
                `
            },
            'default': {
                title: "Data Visualization Help - Ask Me Anything!",
                content: `
                    <h5>üìä I'm Here to Help with Data Visualization!</h5>
                    <p>I can help you with any aspect of creating effective graphs and charts in Excel:</p>
                    
                    <div class="example-box">
                        <strong>Popular Topics I Can Help With:</strong><br>
                        ‚Ä¢ Choosing the right chart type for your data<br>
                        ‚Ä¢ Understanding correlation and R¬≤ values<br>
                        ‚Ä¢ Creating professional scatter plots and trendlines<br>
                        ‚Ä¢ Formatting charts for academic work<br>
                        ‚Ä¢ Interpreting patterns in your data<br>
                        ‚Ä¢ Excel technical help and troubleshooting
                    </div>
                    
                    <h5>üí° Try Asking About:</h5>
                    <p>‚Ä¢ "How do I know which graph to use?"<br>
                    ‚Ä¢ "What does my correlation coefficient mean?"<br>
                    ‚Ä¢ "How do I make my chart look professional?"<br>
                    ‚Ä¢ "How do I add a trendline in Excel?"<br>
                    ‚Ä¢ "What do outliers in my data mean?"</p>
                    
                    <p>Feel free to ask specific questions about your data visualization challenges!</p>
                `
            }
        };

        // Enhanced question matching function
        function findBestResponse(question) {
            const q = question.toLowerCase();
            
            // Graph Types & Selection
            if (q.includes('which graph') || q.includes('what graph') || q.includes('choose graph') || q.includes('graph type')) return 'which graph';
            if ((q.includes('scatter') && q.includes('line')) || q.includes('scatter vs line')) return 'scatter vs line';
            if ((q.includes('bar') && q.includes('histogram')) || q.includes('bar vs histogram')) return 'bar vs histogram';
            if (q.includes('pie chart') || q.includes('when pie')) return 'pie chart';
            if (q.includes('box plot') && (q.includes('when') || q.includes('use'))) return 'box plot use';
            if (q.includes('histogram') && (q.includes('when') || q.includes('use'))) return 'histogram use';
            if (q.includes('line graph') || q.includes('line chart')) return 'line graph';
            if ((q.includes('column') && q.includes('bar')) || q.includes('vertical vs horizontal')) return 'column vs bar';
            if (q.includes('3d') || q.includes('three dimensional')) return '3d charts';
            if (q.includes('chart selection') || q.includes('decision tree')) return 'chart selection';
            
            // Correlation & Relationships
            if (q.includes('correlation coefficient') || (q.includes('correlation') && q.includes('r'))) return 'correlation coefficient';
            if (q.includes('r squared') || q.includes('r¬≤') || q.includes('r-squared')) return 'r squared';
            if ((q.includes('r vs') && q.includes('r¬≤')) || q.includes('difference between r')) return 'r vs r squared';
            if (q.includes('correlation strength') || q.includes('strong correlation')) return 'correlation strength';
            if (q.includes('negative correlation') || q.includes('negative r')) return 'negative correlation';
            if (q.includes('correlation excel') || q.includes('calculate correlation')) return 'correlation excel';
            if (q.includes('correlation causation') || q.includes('correlation imply causation')) return 'correlation causation';
            if (q.includes('meaningful correlation') || q.includes('significant correlation')) return 'strong correlation';
            
            // Excel Technical Help
            if (q.includes('trendline') || q.includes('trend line')) return 'add trendline';
            if (q.includes('format') && q.includes('ax')) return 'format axes';
            if (q.includes('gridlines') || q.includes('grid lines')) return 'remove gridlines';
            if (q.includes('color') && q.includes('chart')) return 'chart colors';
            if (q.includes('error bar')) return 'error bars';
            if (q.includes('scatter plot') && q.includes('excel')) return 'scatter plot excel';
            if (q.includes('axis label') || q.includes('label ax')) return 'axis labels';
            if (q.includes('resize') || q.includes('size chart')) return 'resize chart';
            
            // Data Interpretation
            if (q.includes('interpret scatter') || q.includes('read scatter')) return 'interpret scatter';
            if (q.includes('outlier')) return 'outliers';
            if (q.includes('read box plot') || q.includes('interpret box')) return 'read box plot';
            if (q.includes('skew') || q.includes('skewed')) return 'skewed data';
            if (q.includes('trend') || q.includes('pattern')) return 'identify trends';
            if (q.includes('normal distribution') || q.includes('bell curve')) return 'normal distribution';
            
            // Formatting & Best Practices
            if (q.includes('academic') || q.includes('professional graph')) return 'good academic graph';
            if (q.includes('title') || q.includes('caption')) return 'chart title';
            if (q.includes('professional color') || q.includes('color choice')) return 'professional colors';
            if (q.includes('axis') && q.includes('zero')) return 'axis zero';
            if (q.includes('professional chart') || q.includes('checklist')) return 'professional chart';
            
            // Common Student Struggles
            if (q.includes('data looks wrong') || q.includes('graph looks weird')) return 'data looks wrong';
            if (q.includes('understand') && q.includes('graph')) return 'understand graph';
            if (q.includes('effective') && q.includes('visual')) return 'effective visualization';
            
            // Specific simple matches
            if (q.includes('correlation') || q.includes(' r ') || q.includes('coefficient')) return 'correlation coefficient';
            if (q.includes('scatter')) return 'scatter plot excel';
            if (q.includes('box')) return 'box plot use';
            
            return 'default';
        }
        
        // Navigation functions
        function showWorksheet() {
            document.getElementById('welcomePage').style.display = 'none';
            document.getElementById('worksheetPage').style.display = 'block';
        }
        
        function showQuiz() {
            document.getElementById('welcomePage').style.display = 'none';
            document.getElementById('quizPage').style.display = 'block';
        }
        
        function goHome() {
            document.getElementById('worksheetPage').style.display = 'none';
            document.getElementById('quizPage').style.display = 'none';
            document.getElementById('chatbotPage').style.display = 'none';
            document.getElementById('welcomePage').style.display = 'block';
            
            // Reset quiz form
            document.getElementById('studentNumber').value = '';
            document.getElementById('q1').value = '';
            document.getElementById('q2').value = '';
            document.getElementById('q3').value = '';
            document.getElementById('cheatsheetSection').classList.remove('show');
            
            // Reset chatbot form
            document.getElementById('chatQuestion').value = '';
            document.getElementById('chatResponse').classList.remove('show');
        }
        
        function showChatbot() {
            document.getElementById('welcomePage').style.display = 'none';
            document.getElementById('chatbotPage').style.display = 'block';
        }
        
        // Sample question functionality
        function askSampleQuestion(question) {
            document.getElementById('chatQuestion').value = question;
            askDrLevinDirect();
        }
        
        function toggleAllQuestions() {
            const additionalQuestions = document.getElementById('additionalQuestions');
            const btn = document.getElementById('showAllBtn');
            
            if (additionalQuestions.style.display === 'none') {
                additionalQuestions.style.display = 'block';
                btn.textContent = 'Show Less Questions ‚Üë';
            } else {
                additionalQuestions.style.display = 'none';
                btn.textContent = 'Show All 40 Questions (20 More) ‚Üì';
            }
        }
        
        // Direct chatbot interaction (no quiz required)
        function askDrLevinDirect() {
            const question = document.getElementById('chatQuestion').value.trim();
            
            if (!question) {
                alert('Please enter a question for Dr. Levin!');
                return;
            }
            
            const responseDiv = document.getElementById('chatResponse');
            responseDiv.classList.add('show');
            responseDiv.innerHTML = `
                <div class="typing-indicator">
                    <div class="ai-avatar-small">üë®‚Äçüè´</div>
                    <span>Dr. Levin is analyzing your question</span>
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            `;
            
            setTimeout(() => {
                const responseKey = findBestResponse(question);
                const response = drLevinResponses[responseKey];
                
                responseDiv.innerHTML = `
                    <div class="response-header">
                        <div class="ai-avatar-small">üë®‚Äçüè´</div>
                        <strong>Dr. Levin responds:</strong>
                    </div>
                    <div class="response-content">
                        <h4>${response.title}</h4>
                        ${response.content}
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="ai-btn secondary" onclick="askAnotherQuestion()">üí≠ Ask Another Question</button>
                        <button class="ai-btn" onclick="goToQuiz()">üìù Take Quiz for Cheat Sheet</button>
                    </div>
                `;
                
                // Scroll to response
                responseDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 2500);
        }
        
        function askAnotherQuestion() {
            document.getElementById('chatQuestion').value = '';
            document.getElementById('chatResponse').classList.remove('show');
            document.getElementById('chatQuestion').focus();
        }
        
        function goToQuiz() {
            showQuiz();
        }
        
        // Worksheet download function
        function downloadWorksheet() {
            const code = document.getElementById('worksheetCode').value.trim().toUpperCase();
            
            if (!code) {
                showMessage('worksheetMessage', 'Please enter a worksheet code.', 'error');
                return;
            }
            
            if (code === 'GGR2_PRAC3') {
                // Use the GitHub raw URL for direct download
                const fileUrl = 'https://github.com/JonathanGGR2/GGR2_STATS1/raw/main/Prac_workalong.xlsx';
                
                // Create a download link
                const link = document.createElement('a');
                link.href = fileUrl;
                link.target = '_blank'; // Opens in new tab if direct download fails
                link.setAttribute('download', 'Prac_workalong.xlsx');
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showMessage('worksheetMessage', '‚úÖ Downloaded: Prac_workalong.xlsx', 'success');
                document.getElementById('worksheetCode').value = '';
            } else {
                showMessage('worksheetMessage', '‚ùå Invalid code. Please use "GGR2_PRAC3" as provided in class.', 'error');
            }
        }
        
        // Exercise download function
        function downloadExercise() {
            const code = document.getElementById('exerciseCode').value.trim().toUpperCase();
            
            if (!code) {
                showMessage('exerciseMessage', 'Please enter a worksheet code.', 'error');
                return;
            }
            
            if (code === 'PRAC3_DOWNLOAD') {
                // Use the GitHub raw URL for direct download
                const fileUrl = 'https://github.com/JonathanGGR2/GGR2_STATS1/raw/main/Prac%203%20-%20student%20exercise.pdf';
                
                // Create a download link
                const link = document.createElement('a');
                link.href = fileUrl;
                link.target = '_blank'; // Opens in new tab if direct download fails
                link.setAttribute('download', 'Prac_3_student_exercise.pdf');
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showMessage('exerciseMessage', '‚úÖ Downloaded: Prac 3 - Student Exercise.pdf', 'success');
                document.getElementById('exerciseCode').value = '';
            } else {
                showMessage('exerciseMessage', '‚ùå Invalid code. Please use "PRAC3_DOWNLOAD" as provided in class.', 'error');
            }
        }
        
        // Quiz submission
        function submitQuiz() {
            const studentNumber = document.getElementById('studentNumber').value.trim();
            const q1 = document.getElementById('q1').value.trim().toLowerCase();
            const q2 = document.getElementById('q2').value.trim().toLowerCase();
            const q3 = document.getElementById('q3').value.trim().toLowerCase();
            
            if (!studentNumber || !q1 || !q2 || !q3) {
                showMessage('quizMessage', 'Please fill in all fields before submitting.', 'error');
                return;
            }
            
            // Check answers
            const answers = [q1, q2, q3];
            let score = 0;
            answers.forEach((answer, index) => {
                if (answer === correctAnswers[index]) {
                    score++;
                }
            });
            
            showMessage('quizMessage', `‚úÖ Quiz submitted! Score: ${score}/3 (${Math.round(score/3*100)}%)`, 'success');
            
            // Show cheat sheet section immediately
            setTimeout(() => {
                document.getElementById('cheatsheetSection').classList.add('show');
            }, 1000);
        }
        
        // Cheat sheet download
        function downloadCheatSheet() {
            // Use the GitHub raw URL for direct download
            const fileUrl = 'https://github.com/JonathanGGR2/GGR2_STATS1/raw/main/Prac3Cheat_Sheet.pdf';
            
            // Create a download link
            const link = document.createElement('a');
            link.href = fileUrl;
            link.target = '_blank'; // Opens in new tab if direct download fails
            link.setAttribute('download', 'Prac3_CheatSheet.pdf');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // Helper functions
        function showMessage(elementId, text, type) {
            const messageDiv = document.getElementById(elementId);
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';
            
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>